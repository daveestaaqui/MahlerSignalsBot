<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Aurora-Signals — Daily &amp; Weekly Market Signals</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="container header-grid">
        <div class="logo">Aurora-Signals</div>
        <nav class="nav">
          <a href="#how-it-works">How it works</a>
          <a href="#what-you-get">What you get</a>
          <a href="#highlights">Today’s highlights</a>
          <a href="/blog">Blog</a>
          <a href="/legal">Legal</a>
          <a class="btn btn-outline" href="/checkout">Subscribe</a>
        </nav>
      </div>
    </header>

    <main>
      <section class="hero">
        <div class="container hero-grid">
          <div>
            <h1>Daily &amp; Weekly Market Signals for Stocks and Crypto</h1>
            <p>
              Aurora-Signals scans US equities plus major Ethereum and Solana pairs, producing rules-based scenarios
              with clear rationales, risk notes, and legally safe copy ready for your channels.
            </p>
            <div class="hero-ctas">
              <a class="btn btn-primary" href="/signals/today" target="_blank" rel="noopener">View today’s signals</a>
              <a class="btn btn-secondary" href="/blog">Read the blog</a>
            </div>
            <p class="hero-note">
              Scenarios are illustrative only. Outcomes depend on future market conditions and are never guaranteed.
            </p>
          </div>
          <div class="status-card">
            <h2>System status</h2>
            <p id="status-text">Checking…</p>
          </div>
        </div>
      </section>

      <section id="how-it-works" class="section">
        <div class="container">
          <h2>How it works</h2>
          <div class="grid-3">
            <article class="feature">
              <h3>Scan</h3>
              <p>Screen liquid US equities and major ETH/SOL assets using price, volume, funding, and macro inputs.</p>
            </article>
            <article class="feature">
              <h3>Score</h3>
              <p>Rules-based filters label timeframe, estimated move range, and an illustrative stop-loss / invalidation zone.</p>
            </article>
            <article class="feature">
              <h3>Ship</h3>
              <p>Publish JSON from <code>/signals/today</code> or repurpose it for Discord, Telegram, X, or newsletters.</p>
            </article>
          </div>
        </div>
      </section>

      <section id="what-you-get" class="section section-alt">
        <div class="container">
          <h2>What you get each day</h2>
          <ul class="what-list">
            <li>3–8 curated signals for both equities and crypto majors.</li>
            <li>Plain-English technical and fundamental rationales.</li>
            <li>Scenario-based expected move ranges, stop hints, and risk notes.</li>
          </ul>
        </div>
      </section>

      <section id="highlights" class="section">
        <div class="container">
          <h2>Today’s highlights</h2>
          <p class="section-note">
            These scenarios are automated opinions based on current conditions. They are not recommendations or personalized advice.
          </p>
          <div id="signals-list" class="signals-list">
            <p>Loading signals…</p>
          </div>
          <p class="disclaimer">
            This system provides automated market analysis for informational purposes only and does not constitute personalized financial, investment, or trading advice.
          </p>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container footer-grid">
        <p class="footer-brand">Aurora-Signals</p>
        <p>
          <a href="/legal">Legal</a> · <a href="/blog">Blog</a>
        </p>
        <p class="footer-disclaimer">
          This system provides automated market analysis for informational purposes only and does not constitute personalized financial, investment, or trading advice.
        </p>
      </div>
    </footer>

    <script>
      const DISCLAIMER =
        "This system provides automated market analysis for informational purposes only and does not constitute personalized financial, investment, or trading advice.";

      document.addEventListener("DOMContentLoaded", () => {
        loadStatus();
        loadSignals();
      });

      async function loadStatus() {
        const statusEl = document.getElementById("status-text");
        if (!statusEl) return;
        try {
          const response = await fetch("/status");
          if (!response.ok) throw new Error("status_failed");
          const payload = await response.json();
          const ts = payload?.ts ? new Date(payload.ts).toLocaleString() : new Date().toLocaleString();
          statusEl.textContent = `Online · ${ts}`;
        } catch (error) {
          console.error("status_load_failed", error);
          statusEl.textContent = "Status unavailable";
        }
      }

      async function loadSignals() {
        const list = document.getElementById("signals-list");
        if (!list) return;
        list.innerHTML = "<p>Loading signals…</p>";
        try {
          const response = await fetch("/signals/today");
          if (!response.ok) throw new Error("signals_failed");
          const payload = await response.json();
          const signals = Array.isArray(payload?.signals) ? payload.signals : [];
          if (!signals.length) {
            list.innerHTML = "<p>No signals available right now.</p>";
            return;
          }
          const fragment = document.createDocumentFragment();
          signals.forEach((signal) => fragment.appendChild(buildSignalCard(signal)));
          list.innerHTML = "";
          list.appendChild(fragment);
        } catch (error) {
          console.error("signals_load_failed", error);
          list.innerHTML = "<p>Signals unavailable. Please check back soon.</p>";
        }
      }

      function buildSignalCard(signal) {
        const card = document.createElement("article");
        card.className = "signal-card";

        const title = document.createElement("h3");
        title.textContent = symbolLabel(signal);
        card.appendChild(title);

        const timeframe = document.createElement("p");
        timeframe.className = "muted";
        timeframe.textContent = `Timeframe: ${signal?.timeframe || "Not specified"}`;
        card.appendChild(timeframe);

        const expected = document.createElement("p");
        expected.className = "scenario";
        expected.textContent = signal?.expectedMove || "Illustrative scenario: move range unavailable.";
        card.appendChild(expected);

        if (signal?.stopLossHint) {
          const stop = document.createElement("p");
          stop.className = "stop-hint";
          stop.textContent = signal.stopLossHint;
          card.appendChild(stop);
        }

        const rationaleList = document.createElement("ul");
        rationaleList.className = "rationale";
        const tech = document.createElement("li");
        tech.textContent = `Technical: ${signal?.rationale?.technical || "Not provided"}`;
        rationaleList.appendChild(tech);
        const fundamentalText =
          signal?.rationale?.fundamental || "No strong fundamental view; scenario is primarily technical.";
        const fund = document.createElement("li");
        fund.textContent = `Fundamental: ${fundamentalText}`;
        rationaleList.appendChild(fund);
        card.appendChild(rationaleList);

        const risk = document.createElement("p");
        risk.className = "muted";
        risk.textContent = signal?.riskNote || "Risk note unavailable; treat as high volatility.";
        card.appendChild(risk);

        const disclaimer = document.createElement("p");
        disclaimer.className = "card-disclaimer";
        disclaimer.textContent = signal?.disclaimer || DISCLAIMER;
        card.appendChild(disclaimer);

        return card;
      }

      function symbolLabel(signal) {
        const asset = signal?.assetClass === "crypto" ? `Crypto${signal.chain ? " · " + signal.chain : ""}` : "Equity";
        return `${signal?.symbol || "Unknown"} · ${asset}`;
      }
    </script>
  </body>
</html>
